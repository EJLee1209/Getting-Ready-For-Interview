# Network Layer

## 네트워크 계층과 전송 계층의 차이를 설명해보세요.

- 통신계층은 프로세스간의 논리적 통신을 수행하고, 네트워크 계층은 호스트간의 논리적 통신을 수행한다는 점에서 차이가 있습니다. 따라서 통신계층은 ip주소+포트로 이루어진 특정 프로세스까지 데이터를 전달하는 것이 목적이고 네트워크 계층은 고유한 MAC 주소를 가진 호스트까지 데이터를 전달하는 것이 목적입니다.

## IPv4 와 IPv6 에 어떤 차이가 있는지 말해보세요.

- IPv4는 32비트 주소체계를 가진 IP주소 표현법니다. 32비트로 표현할 수 있는 만큼의 고유한 IP주소를 만들 수 있기 때문에 개수가 한정되어 있고 거의 고갈되어 있는 상태입니다. 이런 문제점을 해결하기 위해 NAT를 사용하여 서브넷을 만들어 IP주소 개수의 한계를 극복하고자합니다. IPv6는 128비트로 주소를 표현하여 거의 무한대에 가까운 IP주소를 만들어 낼 수 있습니다.

## IPv4의 문제를 어떻게 극복했는지 설명해주세요.

- 공인IP와 사설IP를 만들어서 해결했습니다. 
- 한 네트워크의 종단이 되는 기본 게이트웨이에는 공동 네트워크에서 사용하는 공인 IP를 부여하고, 게이트웨이에 포함되는 호스트들에는 사설망 내부에서만 유효한 사설IP주소를 부여합니다. 이렇게 하면 모든 호스트에 각각 고유한 IP주소를 제공하지 않아도 서로 다른 사설망 끼리는 중복된 IP주소를 제공할 수 있습니다. 

## 그럼 사설 IP에서 공인 IP로는 어떻게 변환되나요?

- 라우터에 NAT테이블을 두어서 요청받은 ip주소와 포트에 대한 사설 ip주소와 포트를 맵핑하여 사용합니다. 

<img width="696" alt="스크린샷 2022-01-01 오후 5 41 18" src="https://user-images.githubusercontent.com/46087477/147847148-6e5bb606-c0b6-4ad4-a47b-4d8e415fa84f.png">

## IP주소의 클래스에 대해 알고있나요?

- A부터 E클래스까지 존재합니다. 각 클래스마다 IPv4 주소에 대해 네트워크 아이디와 호스트 아이디로 구분합니다.
- A클래스는 MSB 8비트, B는 16비트, C는 24비트를 네트워크 주소로 할당합니다. 그래서 네트워크 아이디에 사용되는 비트수가 많아질 수록(클래스가 커질 수록) 생성할 수 있는 네트워크 그룹이 많이지고 네트워크에 포함되는 호스트의 개수는 줄어듭니다. 
- D클래스는 브로드 캐스팅용으로 사용되고, E클래스는 연구용도로 사용됩니다.

## CIDR가 무엇인지 설명해보세요.

- IP주소를 나눌 때 클래스 방식은 8, 16, 24 옥텟으로 나누어서 표현헀기 때문에 더 세분화해서 네트워크를 분리할 수 없다는 문제가 있었습니다.
- CIDR는 이런 문제를 해결하기 위해서 클래슬 사용하지 않고 ip주소의 prefix를 이용해서 더 유연하게 네트워크영역과 호스트영역을 나눌 수 있게 하는 방식입니다.

## ARP 가 무엇인지 설명해보세요.

- ARP 는 IP 주소를 통해 MAC 주소를 알아내기 위해 사용하는 프로토콜입니다. 

## ARP 가 동작하는 과정을 설명해보세요.

- 요청을 보낼 호스트가 목적지 호스트의 IP 주소를 알고있는 상태에서 ARP 메세지를 브로드 캐스트합니다. ARP 메세지 안에는 자신의 IP주소, MAC주소, 목적지 호스트의 IP로 채워져있습니다.
- 브로드캐스트를 받은 호스트들은 ARP 메세지 안에 있는 목적지 IP주소를 자신의 IP주소와 비교합니다.
- 자신의 IP주소와 일치하는 것을 확인한 호스트는 목적지 IP주소와 MAC주소를 요청을 보낸 호스트의 주소로 설정하고, 출발지 IP주소와 MAC주소를 자신의 주소로 설정한뒤 유니캐스트로 ARP 패킷을 전송합니다.
- ARP 패킷을 반환받은 호스트는 내부에 있는 MAC주소를 읽어 목적지 호스트와 통신을 시도합니다.

## 최초에 ARP Request 가 브로드캐스트로 보내지는 이유는 뭐예요?

- 두 호스트는 IP주소로 논리적통신을 하지만 실제로는 MAC주소를 알고있어야 통신할 수 있기 때문입니다. 따라서 MAC 주소를 모르기 때문에 네트워크 내에 있는 모든 호스트들에게 목적지의 IP주소가 담긴 ARP 패킷을 브로드캐스트해야 합니다.

## ICMP 프로토콜을 어떤 목적으로 사용하는지 말해보세요.

- ICMP 프로토콜은 호스트들의 통신 간의 오류메세지를 송수신하기위해 사용합니다.

## 라우팅 프로토콜 중 Distance Vector 방식과 Link State 방식의 차이를 말해보세요.

- Distance Vector 방식은 주기적으로 라우팅 테이블을 교환하면서 목적지까지의 거리와 방향을 저장합니다. 경로를 알아내기 위해서 네트워크 내의 각 라우터가 인접한 라우터들과 정보를 교환하면서 라우팅 테이블을 채워갑니다.
- Link State 방식은 목적지까지 갈 수 있는 모든 경로정보를 저장합니다. 경로를 알아내기 위해 각 라우터가 다른 모든 라우터까지 갈 수 있는 최단 경로를 다익스트라 알고리즘으로 찾아 저장합니다. 네트워크 상태가 변경되면 변경된 라우터가 자신의 정보를 전파시킵니다.
