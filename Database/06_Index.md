## 인덱스

## 인덱스의 장점과 단점을 말해보세요.

- 인덱스를 사용하면 테이블을 조회하는 속도가 빨라집니다. 하지만 조회가 아니라 데이터를 변경해야하는 속성에 인덱스를 걸면 오히려 성능이 저하될 수 있습니다.

## 데이터를 변경하는 속성에 적용하면 왜 성능이 저하되는데요?

- 삭제, 갱신, 삽입으로 기존 데이터를 변경하거나 새로운 데이터를 추가하게 되면 해당 데이터에 걸려있는 인덱스를 함께 변경하거나 추가해줘야합니다. 따라서 추가적인 연산이 발생하므로 성능이 저하됩니다.

## 그럼 인덱스는 어떤 상황에서 쓰는게 적합할까요?

- 데이터의 양이 많지만 조회를 주로하고 중복데이터가 많지 않은 속성에 적용했을 때 좋은 성능을 보장받을 수 있습니다.

## 인덱스는 내부적으로 어떻게 구현되는지 알아요?

- 데이터베이스에서는 B+Tree 자료구조를 사용하여 인덱스를 관리합니다. 데이터를 나타내는 각 리프노드들이 인덱스를 가지고 있고 각 리프노드들이 서로 더블링크드리스트로 연결되어 있어 순차적인 탐색을 빠르게 할 수 있습니다.

## Clustered Index 와 Non-Clustered Index 의 차이가 뭔가요?

- 클러스터드 인덱스는 데이터가 추가될 때마다 인덱스를 기준으로 데이터를 재배열합니다. 따라서 데이터가 순차적으로 저장됩니다. 이 때문에 조회의 속도는 빠르지만 갱신, 삽입, 삭제 시 전체 테이블을 다시 재배열 해주어야 하는 오버헤드를 가지고있습니다.
- 넌 클러스터드 인덱스는 데이터와 인덱스를 따로 분리하여 관리합니다. 따라서 데이터는 물리적으로 정렬하지 않고 정렬된 인덱스가 가르키는 포인터로 데이터를 찾습니다. 따라서 조회에는 클러스터드 인덱스보다 많은 시간이 들지만 갱신, 삭제, 삽입에는 클러스터드 인덱스보다 빠른 성능을 보입니다.

## Cardinality 가 뭔지 알아요?

- 카디널리티는 컬럼 내의 중복되는 데이터의 비율에 따라서 결정됩니다. 어떤 컬럼에 중복되는 데이터가 많다면 카디널리티가 낮다고 할 수 있습니다. 카디널리티를 수치화하면 해당 컬럼에 있는 고유한 데이터의 개수입니다.

## 그럼 Selectivity도 설명할 수 있어요?

- 선택도는 카디널리티를 해당 컬럼의 전체 데이터 개수로 나눈 값입니다. 즉, 한 컬럼 내에 고유한 데이터의 비율을 나타냅니다.

## 인덱스를 설정할 때 카디널리티가 성능에 어떤 영향을 미칠까요?

- 카디널리티가 높은 인덱스에 인덱스를 설정하면 한 인덱스로 많은 데이터를 필터링할 수 있기 때문에 인덱스가 더 좋은 성능을 내도록 할 수 있습니다.
