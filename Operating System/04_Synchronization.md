# 동기화 

## Race Condition 에 대해서 설명해보세요

- Race Condition은 스레드가 데이터에 어떤 순서로 접근하는지에 따라 실행결과가 달라지는 상황을 말합니다.

## 임계구역이 무엇인지 설명하고 임계구역 문제 해결을 위한 필수 요구조건을 말해보세요.

- 임계구역은 어떤 코드의 영역에서 다수의 프로세스가 서로 데이터를 공유하는 부분을 말합니다. 한번에 여러 스레드가 임계구역에 접근하여 데이터를 변경하면 동기화 문제가 발생합니다.
- 임계구역 문제를 해결하기 위해서는 세 가지 요구조건을 만족시켜야 합니다.
  1. `상호배제` : 어떤 프로세스가 임계 구역에 있다면 다른 스레드는 임계구역으로 진입할 수 없습니다.
  2. `진행` : 임계구역에 스레드가 없고 다수의 스레드가 임계구역 진입을 위해 대기 중이라면 하나의 스레드를 적절하게 골라 임계구역에 진입시켜야합니다.
  3. `한정 대기` : 한번 임계구역에 진입했던 스레드는 다음 실행에 대해 제한을 받아야합니다. 

## 임계구역 문제를 해결하기 위한 하드웨어적인 방법을 말해보세요.

- `Test & Set` 과 `Compare-and-Swap` 이 있습니다. 두 방법 모두 임계구역 진입을 위한 원자적인 연산을 보장합니다. 이를 통해 상호배제와 진행 조건을 만족시킵니다. 하지만 한번 임계구역에 진입했던 스레드가 다시 임계구역으로 재진입하는 것을 제한하지 않기 때문에 한정 대기 요구조건을 만족시키지는 못합니다. 

## 세마포어가 무엇인지 말해보세요.

- 세마포어는 wait, signal 의 원자적 명령을 사용해서 공유자원 문제를 해결한다. 세마포어는 정수값을 가지고 이 값이 임계구역 내에 접근이 가능한 자원의 개수를 의미합니다. 어떤 스레드가 자원을 획득하면 세마포어의 값이 감소하고, 방출하면 세마포어의 값이 증가합니다.

## 세마포어의 단점이 무엇인지 말해보세요.

- 세마포어는 스레드가 임계구역에 자리가 생길 때까지 무한루프를 돌며 기다리게 하는 스핀락으로 구현되어 있습니다. 이 때문에 불필요한 CPU Time 을 사용한다는 단점이 있습니다.

## 그럼 뮤텍스는 뭔가요?

- 뮤텍스는 lock 을 사용하여 한번에 하나의 스레드만 뮤텍스 락을 획득하고 임계구역에 진입하게 하는 기술입니다.

## 뮤텍스랑 세마포어랑 무슨 차이가 있나요?

- 뮤텍스는 락을 획득한 스레드만이 락을 방출할 수 있는 반면에 세마포어는 signal 함수에 의해 락을 획득하고 있지 않은 스레드도 세마포어의 값을 증가시켜 다른 스레드를 임계구역으로 진입시킬 수 있습니다.

## Deadlock 에 무엇인가요?

- 데드락은 프로세스나 스레드가 서로의 자원을 얻기 위해 무한정하게 대기하고 있는 상태를 말합니다.

## Deadlock 의 발생조건은?

- 네 가지 조건이 있습니다. 
  1. `상호 배제` : 한 스레드만 자원에 접근할 수 있습니다.
  2. `점유 대기` : 이미 하나의 자원을 점유하고 있는 상태에서 다른 스레드에 할당된 자원을 점유하려는 스레드가 존재해야합니다.
  3. `비선점` : 한 스레드에 할당된 자원은 스스로 방출할 때까지 선점될 수 없습니다.
  4. `순환대기` : 자원을 점유하려는 스레드들이 순환형태로 자원 점유를 위헤 대기해야합니다.

## Deadlock 을 해결할 수 있는 방법을 말해보세요.

- 네 가지 방법이 있습니다.
  1. `예방` : 교착 상태가 발생하는 네 조건 중 하나만 해결합니다.
  2. `회피` : 자원 할당 그래프나 은행원 알고리즘을 통해 교착상태가 발생하지 않도록 합니다.
  3. `회복` : 발생한 교착상태를 해결합니다.
  4. `무시` : 교착상태를 무시합니다.

## 자원 할당 그래프 알고리즘에 대해 설명해보세요.

- 자원 할당 그래프 알고리즘은 각 스레드와 공유자원을 그래프의 정점으로 만듭니다. 한 스레드가 다른 스레드에게 요청을 할 때는 요청간선을 두 스레드 사이에 만듭니다. 그리고 한 스레드가 자원을 획득하면 할당선을 만들게 됩니다. 이때 각 정점들 사이에 사이클이 발생하면 교착상태가 발생했다고 판단합니다.

## 은행원 알고리즘에 대해 설명해보세요.

- 은행원 알고리즘은 안전상태와 불안전상태 개념을 사용합니다. 안전상태는 스레드가 요구한만큼 자원할당이 가능한 상태를 말하고 이때는 교착상태가 발생하지 않습니다. 불안전상태는 요구받은 만큼의 자원을 가지고 있지 않은 상태를 말합니다. 운영체제는 자원 할당 요청을 받았을 때 해당 자원을 할당한 이후에 안전상태가 유지되는지를 미리 검사합니다. 그리고 안전상태가 유지되는 자원 요구만을 수락하고 불안정 상태를 만드는 요청은 모두 거절합니다.
